<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/tailwind.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Gestión de Usuarios</title>
</head>
<body class="bg-gray-50">
    <%- include('../partials/navbar') %>

    <div class="container mx-auto p-6">
        <h2 class="text-2xl font-bold mb-6 text-gray-800">Panel de Usuarios</h2>

        <div class="flex justify-between mb-6 bg-white p-4 rounded-lg shadow-sm">
            <form action="/usuarios" method="GET" class="flex gap-2">
                <input type="text" name="search" value="<%= search %>" placeholder="Buscar nombre o correo..." class="border p-2 rounded w-64 focus:ring-2 focus:ring-emerald-500 outline-none">
                <button type="submit" class="bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700">Buscar</button>
            </form>
            <button onclick="document.getElementById('modalCreate').classList.toggle('hidden')" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">+ Nuevo Usuario</button>
        </div>

        <div class="overflow-x-auto bg-white rounded-lg shadow">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="bg-gray-100 border-b">
                        <th class="p-4 font-semibold">Nombre</th>
                        <th class="p-4 font-semibold">Correo</th>
                        <th class="p-4 font-semibold">Rol</th>
                        <th class="p-4 font-semibold">Estado</th>
                        <th class="p-4 font-semibold text-center">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <% usuarios.forEach(user => { %>
                    <tr class="border-b hover:bg-gray-50 transition">
                        <td class="p-4"><%= user.nombre %></td>
                        <td class="p-4"><%= user.correo %></td>
                        <td class="p-4"><span class="px-2 py-1 rounded text-xs <%= user.rol === 'Administrador' ? 'bg-purple-100 text-purple-700' : 'bg-orange-100 text-orange-700' %>"><%= user.rol %></span></td>
                        <td class="p-4 text-sm"><%= user.activo ? '✅ Activo' : '❌ Inactivo' %></td>
                        <td class="p-4 flex justify-center gap-2">
                            <a href="/usuarios/<%= user._id %>" class="text-blue-600 hover:underline">Editar</a>
                            <a href="/usuarios/delete/<%= user._id %>" class="text-red-600 hover:underline" onclick="return confirm('¿Eliminar?')">Borrar</a>
                        </td>
                    </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>