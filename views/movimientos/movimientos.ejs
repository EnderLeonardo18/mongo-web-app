<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Movimientos - Codecyt</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

        <%- include('../partials/navbar') %>

    <div class="container py-5">
        <h1 class="mb-4 text-warning">ðŸ”„ Historial de Entradas y Salidas</h1>

        <table class="table table-hover bg-white shadow-sm border">
            <thead class="table-warning">
                <tr>
                    <th>Fecha</th>
                    <th>Responsable</th>
                    <th>Saco afectado</th>
                    <th>Tipo</th>
                    <th>Cantidad</th>
                </tr>
            </thead>
            <tbody>
                <% movimientos.forEach(m => { %>
                <tr>
                    <td><%= new Date(m.fecha).toLocaleString() %></td>
                    <td><strong><%= m.usuarioId ? m.usuarioId.nombre : 'Usuario Eliminado' %></strong></td>
                    <td><%= m.sacoId ? m.sacoId.codigoSaco : 'N/A' %></td>
                    <td>
                        <span class="badge <%= m.tipoMovimiento === 'Entrada' ? 'bg-success' : 'bg-danger' %>">
                            <%= m.tipoMovimiento %>
                        </span>
                    </td>
                    <td><%= m.cantidad %> kg</td>
                </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
</body>
</html>